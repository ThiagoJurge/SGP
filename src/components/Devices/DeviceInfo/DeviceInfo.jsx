import { Card, Result } from "antd";
import { useEffect, useState } from "react";
import { useParams } from "react-router-dom";
import { LoadingOutlined } from "@ant-design/icons";
import OPSInfo from "../OPSInfo/OPSInfo";
import {
  CartesianGrid,
  Legend,
  Line,
  LineChart,
  ResponsiveContainer,
  Tooltip,
  XAxis,
  YAxis,
} from "recharts";

const DeviceInfo = () => {
  const data = [
    {
      x: 1686798000000,
      y: "-17.8",
    },
    {
      x: 1686798900000,
      y: "-17.89",
    },
    {
      x: 1686799800000,
      y: "-17.86",
    },
    {
      x: 1686800700000,
      y: "-17.86",
    },
    {
      x: 1686801600000,
      y: "-17.85",
    },
    {
      x: 1686802500000,
      y: "-18.01",
    },
    {
      x: 1686803400000,
      y: "-17.86",
    },
    {
      x: 1686804300000,
      y: "-17.79",
    },
    {
      x: 1686805200000,
      y: "-17.9",
    },
    {
      x: 1686806100000,
      y: "-17.82",
    },
    {
      x: 1686807000000,
      y: "-17.74",
    },
    {
      x: 1686807900000,
      y: "-17.74",
    },
    {
      x: 1686808800000,
      y: "-17.83",
    },
    {
      x: 1686809700000,
      y: "-17.89",
    },
    {
      x: 1686810600000,
      y: "-17.89",
    },
    {
      x: 1686811500000,
      y: "-17.87",
    },
    {
      x: 1686812400000,
      y: "-17.78",
    },
    {
      x: 1686813300000,
      y: "-17.78",
    },
    {
      x: 1686814200000,
      y: "-17.86",
    },
    {
      x: 1686815100000,
      y: "-17.84",
    },
    {
      x: 1686816000000,
      y: "-17.9",
    },
    {
      x: 1686816900000,
      y: "-17.76",
    },
    {
      x: 1686817800000,
      y: "-17.85",
    },
    {
      x: 1686818700000,
      y: "-17.92",
    },
    {
      x: 1686819600000,
      y: "-17.81",
    },
    {
      x: 1686820500000,
      y: "-18.04",
    },
    {
      x: 1686821400000,
      y: "-18.03",
    },
    {
      x: 1686822300000,
      y: "-17.88",
    },
    {
      x: 1686823200000,
      y: "-17.83",
    },
    {
      x: 1686824100000,
      y: "-18.03",
    },
    {
      x: 1686825000000,
      y: "-17.71",
    },
    {
      x: 1686825900000,
      y: "-17.72",
    },
    {
      x: 1686826800000,
      y: "-17.8",
    },
    {
      x: 1686827700000,
      y: "-17.81",
    },
    {
      x: 1686828600000,
      y: "-17.72",
    },
    {
      x: 1686829500000,
      y: "-17.86",
    },
    {
      x: 1686830400000,
      y: "-17.79",
    },
    {
      x: 1686831300000,
      y: "-17.87",
    },
    {
      x: 1686832200000,
      y: "-17.86",
    },
    {
      x: 1686833100000,
      y: "-17.81",
    },
    {
      x: 1686834000000,
      y: "-17.7",
    },
    {
      x: 1686834900000,
      y: "-17.88",
    },
    {
      x: 1686835800000,
      y: "-17.78",
    },
    {
      x: 1686836700000,
      y: "-17.76",
    },
    {
      x: 1686837600000,
      y: "-17.81",
    },
    {
      x: 1686838500000,
      y: "-17.75",
    },
    {
      x: 1686839400000,
      y: "-17.77",
    },
    {
      x: 1686840300000,
      y: "-17.74",
    },
    {
      x: 1686841200000,
      y: "-17.69",
    },
    {
      x: 1686842100000,
      y: "-17.59",
    },
    {
      x: 1686843000000,
      y: "-17.76",
    },
    {
      x: 1686843900000,
      y: "-17.8",
    },
    {
      x: 1686844800000,
      y: "-17.58",
    },
    {
      x: 1686845700000,
      y: "-17.68",
    },
    {
      x: 1686846600000,
      y: "-17.83",
    },
    {
      x: 1686847500000,
      y: "-17.68",
    },
    {
      x: 1686848400000,
      y: "-17.62",
    },
    {
      x: 1686849300000,
      y: "-17.7",
    },
    {
      x: 1686850200000,
      y: "-17.64",
    },
    {
      x: 1686851100000,
      y: "-17.45",
    },
    {
      x: 1686852000000,
      y: "-17.65",
    },
    {
      x: 1686852900000,
      y: "-17.75",
    },
    {
      x: 1686853800000,
      y: "-17.64",
    },
    {
      x: 1686854700000,
      y: "-17.72",
    },
    {
      x: 1686855600000,
      y: "-17.8",
    },
    {
      x: 1686856500000,
      y: "-17.82",
    },
    {
      x: 1686857400000,
      y: "-17.66",
    },
    {
      x: 1686858300000,
      y: "-17.75",
    },
    {
      x: 1686859200000,
      y: "-17.66",
    },
    {
      x: 1686860100000,
      y: "-17.76",
    },
    {
      x: 1686861000000,
      y: "-17.8",
    },
    {
      x: 1686861900000,
      y: "-17.68",
    },
    {
      x: 1686862800000,
      y: "-17.78",
    },
    {
      x: 1686863700000,
      y: "-17.71",
    },
    {
      x: 1686864600000,
      y: "-17.81",
    },
    {
      x: 1686865500000,
      y: "-17.77",
    },
    {
      x: 1686866400000,
      y: "-17.81",
    },
    {
      x: 1686867300000,
      y: "-17.67",
    },
    {
      x: 1686868200000,
      y: "-17.55",
    },
    {
      x: 1686869100000,
      y: "-17.84",
    },
    {
      x: 1686870000000,
      y: "-17.84",
    },
    {
      x: 1686870900000,
      y: "-17.87",
    },
    {
      x: 1686871800000,
      y: "-17.66",
    },
    {
      x: 1686872700000,
      y: "-17.73",
    },
    {
      x: 1686873600000,
      y: "-17.81",
    },
    {
      x: 1686874500000,
      y: "-17.92",
    },
    {
      x: 1686875400000,
      y: "-17.75",
    },
    {
      x: 1686876300000,
      y: "-17.77",
    },
    {
      x: 1686877200000,
      y: "-17.89",
    },
    {
      x: 1686878100000,
      y: "-17.78",
    },
    {
      x: 1686879000000,
      y: "-17.85",
    },
    {
      x: 1686879900000,
      y: "-17.79",
    },
    {
      x: 1686880800000,
      y: "-17.81",
    },
    {
      x: 1686881700000,
      y: "-17.98",
    },
    {
      x: 1686882600000,
      y: "-17.89",
    },
    {
      x: 1686883500000,
      y: "-17.9",
    },
    {
      x: 1686884400000,
      y: "-17.88",
    },
    {
      x: 1686885300000,
      y: "-17.91",
    },
    {
      x: 1686886200000,
      y: "-17.83",
    },
    {
      x: 1686887100000,
      y: "-17.93",
    },
    {
      x: 1686888000000,
      y: "-17.7",
    },
    {
      x: 1686888900000,
      y: "-17.82",
    },
    {
      x: 1686889800000,
      y: "-17.92",
    },
    {
      x: 1686890700000,
      y: "-17.8",
    },
    {
      x: 1686891600000,
      y: "-17.94",
    },
    {
      x: 1686892500000,
      y: "-17.75",
    },
    {
      x: 1686893400000,
      y: "-17.88",
    },
    {
      x: 1686894300000,
      y: "-17.96",
    },
    {
      x: 1686895200000,
      y: "-17.81",
    },
    {
      x: 1686896100000,
      y: "-17.79",
    },
    {
      x: 1686897000000,
      y: "-18.03",
    },
    {
      x: 1686897900000,
      y: "-17.91",
    },
    {
      x: 1686898800000,
      y: "-17.88",
    },
    {
      x: 1686899700000,
      y: "-17.87",
    },
    {
      x: 1686900600000,
      y: "-17.89",
    },
    {
      x: 1686901500000,
      y: "-17.85",
    },
    {
      x: 1686902400000,
      y: "-17.88",
    },
    {
      x: 1686903300000,
      y: "-17.91",
    },
    {
      x: 1686904200000,
      y: "-17.89",
    },
    {
      x: 1686905100000,
      y: "-17.77",
    },
    {
      x: 1686906000000,
      y: "-17.95",
    },
    {
      x: 1686906900000,
      y: "-17.87",
    },
    {
      x: 1686907800000,
      y: "-17.8",
    },
    {
      x: 1686908700000,
      y: "-17.76",
    },
    {
      x: 1686909600000,
      y: "-17.83",
    },
    {
      x: 1686910500000,
      y: "-17.89",
    },
    {
      x: 1686911400000,
      y: "-17.83",
    },
    {
      x: 1686912300000,
      y: "-17.78",
    },
    {
      x: 1686913200000,
      y: "-18.02",
    },
    {
      x: 1686914100000,
      y: "-17.89",
    },
    {
      x: 1686915000000,
      y: "-17.91",
    },
    {
      x: 1686915900000,
      y: "-17.83",
    },
    {
      x: 1686916800000,
      y: "-17.84",
    },
    {
      x: 1686917700000,
      y: "-17.75",
    },
    {
      x: 1686918600000,
      y: "-17.83",
    },
    {
      x: 1686919500000,
      y: "-17.85",
    },
    {
      x: 1686920400000,
      y: "-17.83",
    },
    {
      x: 1686921300000,
      y: "-17.75",
    },
    {
      x: 1686922200000,
      y: "-17.64",
    },
    {
      x: 1686923100000,
      y: "-17.77",
    },
    {
      x: 1686924000000,
      y: "-17.67",
    },
    {
      x: 1686924900000,
      y: "-17.68",
    },
    {
      x: 1686925800000,
      y: "-17.63",
    },
    {
      x: 1686926700000,
      y: "-17.69",
    },
    {
      x: 1686927600000,
      y: "-17.76",
    },
    {
      x: 1686928500000,
      y: "-17.62",
    },
    {
      x: 1686929400000,
      y: "-17.72",
    },
    {
      x: 1686930300000,
      y: "-17.72",
    },
    {
      x: 1686931200000,
      y: "-17.72",
    },
    {
      x: 1686932100000,
      y: "-17.65",
    },
    {
      x: 1686933000000,
      y: "-17.61",
    },
    {
      x: 1686933900000,
      y: "-17.76",
    },
    {
      x: 1686934800000,
      y: "-17.74",
    },
  ];

  function getData (x, y){
    return {
      'Horário': new Date(x).toUTCString(),
      'Potência': y
    }
  }
  const [component, setComponent] = useState(<LoadingOutlined />);
  const deviceKey = useParams().id;
  const deviceFamily = useParams().family;

  function CustomTooltip({ payload, label, active }) {
    if (active) {
      return (
        <Card style={{textAlign: 'left'}}>
          {/* http://10.33.14.134/card/advanced/INPUT_POWER/2336/915/Working%20Route%20B/null/null/15m */}
          <p>Horário: {label}</p>
          <p>Potência: {payload[0].value}</p>
        </Card>
      );
    }
  
    return null;
  }

  useEffect(() => {
    if (deviceFamily == "ops") {
      return setComponent(<OPSInfo deviceKey={deviceKey} />);
    } else {
      return setComponent(
        <ResponsiveContainer width={'100%'} height="80%">

        <LineChart
          data={data.map((item)=>getData(item.x, item.y))}
          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
        >
          <XAxis dataKey="Horário" />
          <YAxis dataKey="Potência" />
          <Legend />
          <Line dataKey="Potência" scale={'dBm'} type={"monotone"}/>
          <Tooltip content={<CustomTooltip />}/>
        </LineChart>
        </ResponsiveContainer>
      );
    }
  }, [deviceKey]);
  return <>{component}</>;
};
export default DeviceInfo;
